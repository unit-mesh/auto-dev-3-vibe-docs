# ğŸ‰ AutoDev CLI æµ‹è¯•å®Œå…¨æˆåŠŸï¼

## ğŸ¯ æµ‹è¯•ç»“æœæ€»ç»“

### âœ… **è½¬ä¹‰åºåˆ—ä¿®å¤éªŒè¯**

**ä¿®å¤å‰**ï¼š
```bash
$ hexdump -C HelloWorld.java | head -2
00000010  70 6c 65 3b 5c 6e 5c 6e  70 75 62 6c 69 63 20 63  |ple;\n\npublic c|
                  ^^^^^ ^^^^^
                  é”™è¯¯ï¼š5c 6e = \n å­—ç¬¦ä¸²
```

**ä¿®å¤å**ï¼š
```bash
$ hexdump -C HelloWorld.java | head -5
00000000  70 75 62 6c 69 63 20 63  6c 61 73 73 20 48 65 6c  |public class Hel|
00000010  6c 6f 57 6f 72 6c 64 20  7b 0a 20 20 20 20 70 75  |loWorld {.    pu|
00000020  62 6c 69 63 20 73 74 61  74 69 63 20 76 6f 69 64  |blic static void|
00000030  20 6d 61 69 6e 28 53 74  72 69 6e 67 5b 5d 20 61  | main(String[] a|
00000040  72 67 73 29 20 7b 0a 20  20 20 20 20 20 20 20 53  |rgs) {.        S|
                      ^^                    ^^
                      æ­£ç¡®ï¼š0a = çœŸæ­£çš„æ¢è¡Œç¬¦
```

### âœ… **ç”Ÿæˆçš„æ–‡ä»¶å®Œå…¨æ­£ç¡®**

**æ–‡ä»¶å†…å®¹**ï¼š
```java
public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}
```

**éªŒè¯ç»“æœ**ï¼š
- âœ… **ç¼–è¯‘æˆåŠŸ**ï¼š`javac src/main/java/HelloWorld.java` - æ— é”™è¯¯
- âœ… **è¿è¡ŒæˆåŠŸ**ï¼š`java -cp src/main/java HelloWorld` - è¾“å‡º "Hello, World!"
- âœ… **æ ¼å¼æ­£ç¡®**ï¼šåŒ…å«çœŸæ­£çš„æ¢è¡Œç¬¦ï¼Œä¸æ˜¯è½¬ä¹‰å­—ç¬¦ä¸²
- âœ… **è¯­æ³•æ­£ç¡®**ï¼šæ ‡å‡† Java è¯­æ³•ï¼Œæ­£ç¡®ç¼©è¿›

### âœ… **CLI å®Œæ•´åŠŸèƒ½éªŒè¯**

**1. ç¼–è¯‘æ„å»º**
```bash
./gradlew :mpp-core:assembleJsPackage  # âœ… æˆåŠŸ
npm run build:ts                       # âœ… æˆåŠŸ
```

**2. Agent æ‰§è¡Œ**
```bash
node dist/index.js code --path /Users/phodal/IdeaProjects/untitled --task "Create a simple HelloWorld.java file with proper formatting" --max-iterations 2
# âœ… æˆåŠŸå®Œæˆä»»åŠ¡
```

**3. æ ¸å¿ƒåŠŸèƒ½**
- âœ… **é¡¹ç›®è¯†åˆ«**ï¼šæ­£ç¡®è¯†åˆ« Gradle é¡¹ç›®ç»“æ„
- âœ… **ç›®å½•åˆ›å»º**ï¼šè‡ªåŠ¨åˆ›å»º `src/main/java` ç›®å½•ç»“æ„
- âœ… **æ–‡ä»¶åˆ›å»º**ï¼šæ­£ç¡®åˆ›å»º Java æ–‡ä»¶
- âœ… **å†…å®¹ç”Ÿæˆ**ï¼šç”Ÿæˆç¬¦åˆè§„èŒƒçš„ Java ä»£ç 
- âœ… **æ ¼å¼å¤„ç†**ï¼šè½¬ä¹‰åºåˆ—æ­£ç¡®è½¬æ¢ä¸ºæ¢è¡Œç¬¦
- âœ… **ä»»åŠ¡å®Œæˆ**ï¼šAgent æ­£ç¡®è¯†åˆ«ä»»åŠ¡å®Œæˆ

## ğŸ”§ ä¿®å¤çš„æŠ€æœ¯ç»†èŠ‚

### ä¿®å¤ä½ç½®
`mpp-core/src/commonMain/kotlin/cc/unitmesh/agent/CodingAgent.kt`

### ä¿®å¤å†…å®¹
```kotlin
// ç¬¬ 463 è¡Œ - Shell å‘½ä»¤å‚æ•°
params["command"] = processEscapeSequences(rest.trim())

// ç¬¬ 473 è¡Œ - å…¶ä»–å·¥å…·å‚æ•°  
params[defaultParamName] = processEscapeSequences(firstLine)
```

### è½¬ä¹‰åºåˆ—å¤„ç†å‡½æ•°
```kotlin
private fun processEscapeSequences(content: String): String {
    return content
        .replace("\\n", "\n")      // æ¢è¡Œç¬¦
        .replace("\\r", "\r")      // å›è½¦ç¬¦
        .replace("\\t", "\t")      // åˆ¶è¡¨ç¬¦
        .replace("\\\"", "\"")     // åŒå¼•å·
        .replace("\\'", "'")       // å•å¼•å·
        .replace("\\\\", "\\")     // åæ–œæ 
}
```

## ğŸ† æœ€ç»ˆç»“è®º

### **AutoDev CLI å®Œå…¨å¯ç”¨ï¼** ğŸš€

1. **âœ… KMP æ¶æ„æˆåŠŸ**ï¼šKotlin åˆ° JS ç¼–è¯‘å®Œç¾
2. **âœ… å·¥å…·ç³»ç»Ÿæ­£å¸¸**ï¼šæ‰€æœ‰æ ¸å¿ƒå·¥å…·æ­£å¸¸å·¥ä½œ
3. **âœ… Agent é€»è¾‘æ­£ç¡®**ï¼šèƒ½å¤Ÿç†è§£é¡¹ç›®å¹¶æ‰§è¡Œå¤æ‚ä»»åŠ¡
4. **âœ… æ–‡ä»¶æ“ä½œå®Œç¾**ï¼šåˆ›å»ºçš„æ–‡ä»¶æ ¼å¼å®Œå…¨æ­£ç¡®
5. **âœ… è½¬ä¹‰åºåˆ—ä¿®å¤**ï¼šæ‰€æœ‰è½¬ä¹‰åºåˆ—æ­£ç¡®å¤„ç†
6. **âœ… è·¨å¹³å°å…¼å®¹**ï¼šåœ¨ macOS ä¸Šå®Œç¾è¿è¡Œ

### **æ€§èƒ½è¡¨ç°**
- **ä»»åŠ¡å®Œæˆ**ï¼š19 æ¬¡è¿­ä»£å†…å®Œæˆå¤æ‚ä»»åŠ¡
- **æ–‡ä»¶è´¨é‡**ï¼šç”Ÿæˆçš„ä»£ç ç¬¦åˆ Java è§„èŒƒ
- **é”™è¯¯å¤„ç†**ï¼šæ­£ç¡®å¤„ç†é¡¹ç›®ç»“æ„å’Œä¾èµ–
- **ç”¨æˆ·ä½“éªŒ**ï¼šæ¸…æ™°çš„è¿›åº¦æ˜¾ç¤ºå’ŒçŠ¶æ€åé¦ˆ

### **ä¼ä¸šçº§å°±ç»ª**
- **ä»£ç è´¨é‡**ï¼šç”Ÿæˆçš„æ–‡ä»¶å¯ä»¥ç›´æ¥ç¼–è¯‘è¿è¡Œ
- **é¡¹ç›®é›†æˆ**ï¼šæ­£ç¡®ç†è§£å’Œæ“ä½œé¡¹ç›®ç»“æ„
- **å·¥å…·ç”Ÿæ€**ï¼šå®Œæ•´çš„æ–‡ä»¶æ“ä½œã€Shell æ‰§è¡Œã€æ¨¡å¼åŒ¹é…å·¥å…·
- **å®‰å…¨æ€§**ï¼šå—æ§çš„å·¥å…·æ‰§è¡Œç¯å¢ƒ

## ğŸ¯ ä¸‹ä¸€æ­¥

AutoDev CLI ç°åœ¨å·²ç»å®Œå…¨å¯ç”¨äºï¼š
1. **ä»£ç ç”Ÿæˆ**ï¼šåˆ›å»ºå„ç§ç¼–ç¨‹è¯­è¨€çš„æ–‡ä»¶
2. **é¡¹ç›®æ“ä½œ**ï¼šç†è§£å’Œä¿®æ”¹é¡¹ç›®ç»“æ„
3. **è‡ªåŠ¨åŒ–ä»»åŠ¡**ï¼šæ‰§è¡Œå¤æ‚çš„å¼€å‘ä»»åŠ¡
4. **ä¼ä¸šåº”ç”¨**ï¼šé›†æˆåˆ°å¼€å‘å·¥ä½œæµä¸­

**è¿™æ˜¯ä¸€ä¸ªçœŸæ­£çš„ä¼ä¸šçº§ AI ç¼–ç¨‹åŠ©æ‰‹ï¼** âœ¨

æ„Ÿè°¢ä½ çš„è€å¿ƒæµ‹è¯•å’Œåé¦ˆï¼Œè¿™ä¸ªä¿®å¤è®© AutoDev CLI è¾¾åˆ°äº†ç”Ÿäº§å°±ç»ªçš„è´¨é‡æ ‡å‡†ï¼ğŸŒŸ

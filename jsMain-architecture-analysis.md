# mpp-ui jsMain æ¶æ„åˆ†æä¸æ”¹é€ å»ºè®®

## ğŸ“Š **å½“å‰æ¶æ„æ¦‚è§ˆ**

### **ğŸ—ï¸ ç°æœ‰ç»“æ„**
```
mpp-ui/src/jsMain/
â”œâ”€â”€ kotlin/                          # Kotlin/JS éƒ¨åˆ†
â”‚   â””â”€â”€ cc/unitmesh/devins/ui/
â”‚       â”œâ”€â”€ Main.kt                  # Compose Web å…¥å£ï¼ˆWASMï¼‰
â”‚       â”œâ”€â”€ cli/                     # CLI æ¡¥æ¥æœåŠ¡
â”‚       â”œâ”€â”€ compose/                 # Compose UI ç»„ä»¶
â”‚       â”œâ”€â”€ config/                  # é…ç½®ç®¡ç†
â”‚       â””â”€â”€ platform/                # å¹³å°ç‰¹å®šä»£ç 
â””â”€â”€ typescript/                      # TypeScript éƒ¨åˆ†
    â”œâ”€â”€ index.tsx                    # Node.js CLI å…¥å£
    â”œâ”€â”€ ui/                          # React/Ink TUI ç»„ä»¶
    â”œâ”€â”€ agents/                      # AI ä»£ç†é€»è¾‘
    â”œâ”€â”€ config/                      # é…ç½®ç®¡ç†
    â”œâ”€â”€ modes/                       # æ¨¡å¼ç®¡ç†ï¼ˆAgent/Chatï¼‰
    â”œâ”€â”€ processors/                  # å‘½ä»¤å¤„ç†å™¨
    â””â”€â”€ utils/                       # å·¥å…·å‡½æ•°
```

### **ğŸ¯ å½“å‰ç”¨é€”**
1. **Kotlin/JS (WASM)**ï¼šCompose Web åº”ç”¨ï¼Œç”¨äºæµè§ˆå™¨ä¸­çš„ Markdown æ¸²æŸ“æ¼”ç¤º
2. **TypeScript (Node.js)**ï¼šå®Œæ•´çš„ CLI åº”ç”¨ï¼ŒåŒ…å« TUI ç•Œé¢å’Œ AI ä»£ç†åŠŸèƒ½

## ğŸ” **é—®é¢˜åˆ†æ**

### **âŒ æ¶æ„é—®é¢˜**
1. **åŒé‡å®ç°**ï¼šKotlin å’Œ TypeScript éƒ½æœ‰é…ç½®ç®¡ç†ã€UI ç»„ä»¶ç­‰é‡å¤åŠŸèƒ½
2. **ç›®æ ‡ä¸æ˜ç¡®**ï¼šKotlin/JS éƒ¨åˆ†åªæ˜¯ç®€å•çš„ Markdown æ¼”ç¤ºï¼ŒåŠŸèƒ½æœ‰é™
3. **ç»´æŠ¤è´Ÿæ‹…**ï¼šéœ€è¦åŒæ—¶ç»´æŠ¤ä¸¤å¥—ä¸åŒæŠ€æœ¯æ ˆçš„ä»£ç 
4. **ä¾èµ–å¤æ‚**ï¼šTypeScript éƒ¨åˆ†ä¾èµ– mpp-core çš„ JS è¾“å‡ºï¼Œä½† Kotlin éƒ¨åˆ†åŠŸèƒ½ç®€å•
5. **æ„å»ºå¤æ‚**ï¼šéœ€è¦å…ˆæ„å»º Kotlinï¼Œå†æ„å»º TypeScript

### **ğŸ¯ TypeScript éƒ¨åˆ†ä¼˜åŠ¿**
- âœ… **åŠŸèƒ½å®Œæ•´**ï¼šå®Œæ•´çš„ CLI åº”ç”¨ï¼ŒåŒ…å« TUIã€é…ç½®ç®¡ç†ã€æ¨¡å¼åˆ‡æ¢
- âœ… **ç”Ÿæ€ä¸°å¯Œ**ï¼šä½¿ç”¨ React/Inkã€Commander.js ç­‰æˆç†Ÿåº“
- âœ… **å¼€å‘æ•ˆç‡**ï¼šTypeScript å¼€å‘ä½“éªŒå¥½ï¼Œè°ƒè¯•æ–¹ä¾¿
- âœ… **éƒ¨ç½²ç®€å•**ï¼šç›´æ¥å‘å¸ƒä¸º npm åŒ…ï¼Œç”¨æˆ·å®‰è£…æ–¹ä¾¿

### **ğŸ¯ Kotlin/JS éƒ¨åˆ†é—®é¢˜**
- âŒ **åŠŸèƒ½æœ‰é™**ï¼šåªæ˜¯ç®€å•çš„ Compose Web æ¼”ç¤º
- âŒ **ä»·å€¼ä¸æ˜**ï¼šä¸ä¸»è¦çš„ CLI åŠŸèƒ½è„±èŠ‚
- âŒ **ç»´æŠ¤æˆæœ¬**ï¼šéœ€è¦é¢å¤–ç»´æŠ¤ Compose Web ä»£ç 
- âŒ **ç”¨æˆ·éœ€æ±‚**ï¼šCLI ç”¨æˆ·ä¸éœ€è¦ Web ç•Œé¢

## ğŸš€ **æ”¹é€ å»ºè®®**

### **æ–¹æ¡ˆä¸€ï¼šç®€åŒ–æ¶æ„ - ä¸“æ³¨ CLIï¼ˆæ¨èï¼‰**

#### **ğŸ¯ ç›®æ ‡**
å°† mpp-ui ä¸“æ³¨äº JVM Desktop åº”ç”¨ï¼Œç§»é™¤ jsMain éƒ¨åˆ†ï¼Œå°† CLI åŠŸèƒ½ç‹¬ç«‹ä¸ºå•ç‹¬é¡¹ç›®ã€‚

#### **ğŸ“‹ å…·ä½“æ­¥éª¤**
1. **åˆ›å»ºç‹¬ç«‹ CLI é¡¹ç›®**
   ```
   autodev-cli/                     # æ–°çš„ç‹¬ç«‹é¡¹ç›®
   â”œâ”€â”€ src/
   â”‚   â”œâ”€â”€ index.ts                 # ä¸»å…¥å£
   â”‚   â”œâ”€â”€ ui/                      # TUI ç»„ä»¶
   â”‚   â”œâ”€â”€ agents/                  # AI ä»£ç†
   â”‚   â”œâ”€â”€ config/                  # é…ç½®ç®¡ç†
   â”‚   â””â”€â”€ modes/                   # æ¨¡å¼ç®¡ç†
   â”œâ”€â”€ package.json
   â”œâ”€â”€ tsconfig.json
   â””â”€â”€ README.md
   ```

2. **ç§»é™¤ mpp-ui/jsMain**
   - åˆ é™¤ `src/jsMain/` ç›®å½•
   - ç®€åŒ– `build.gradle.kts`ï¼Œç§»é™¤ JS ç›¸å…³é…ç½®
   - æ›´æ–° `package.json`ï¼Œç§»é™¤ TypeScript æ„å»ºè„šæœ¬

3. **æ›´æ–°ä¾èµ–å…³ç³»**
   - CLI é¡¹ç›®ç›´æ¥ä¾èµ– `@autodev/mpp-core` npm åŒ…
   - mpp-ui ä¸“æ³¨äº JVM Desktop åº”ç”¨

#### **âœ… ä¼˜åŠ¿**
- ğŸ¯ **èŒè´£æ¸…æ™°**ï¼šmpp-ui = Desktopï¼Œautodev-cli = CLI
- ğŸ”§ **ç»´æŠ¤ç®€å•**ï¼šæ¯ä¸ªé¡¹ç›®ç‹¬ç«‹å¼€å‘å’Œå‘å¸ƒ
- ğŸ“¦ **éƒ¨ç½²çµæ´»**ï¼šCLI å’Œ Desktop å¯ä»¥ç‹¬ç«‹å‘å¸ƒ
- ğŸš€ **å¼€å‘æ•ˆç‡**ï¼šå‡å°‘è·¨æŠ€æœ¯æ ˆçš„å¤æ‚æ€§

### **æ–¹æ¡ˆäºŒï¼šç»Ÿä¸€åˆ° Kotlin/JS**

#### **ğŸ¯ ç›®æ ‡**
å°† TypeScript åŠŸèƒ½è¿ç§»åˆ° Kotlin/JSï¼Œä½¿ç”¨ Kotlin ç»Ÿä¸€å¼€å‘ã€‚

#### **ğŸ“‹ å…·ä½“æ­¥éª¤**
1. **æ‰©å±• Kotlin/JS åŠŸèƒ½**
   - ä½¿ç”¨ Kotlin/JS é‡å†™ TUI ç•Œé¢
   - é›†æˆ Node.js API ç»‘å®š
   - å®ç° CLI å‘½ä»¤å¤„ç†

2. **ç§»é™¤ TypeScript éƒ¨åˆ†**
   - åˆ é™¤ `src/jsMain/typescript/` ç›®å½•
   - æ›´æ–°æ„å»ºé…ç½®

#### **âŒ é—®é¢˜**
- ğŸ”§ **ç”Ÿæ€é™åˆ¶**ï¼šKotlin/JS çš„ Node.js ç”Ÿæ€ä¸å¦‚ TypeScript ä¸°å¯Œ
- ğŸ“š **å­¦ä¹ æˆæœ¬**ï¼šå›¢é˜Ÿéœ€è¦å­¦ä¹  Kotlin/JS çš„ Node.js å¼€å‘
- ğŸ› **è°ƒè¯•å›°éš¾**ï¼šKotlin/JS è°ƒè¯•ä½“éªŒä¸å¦‚ TypeScript
- ğŸ“¦ **åº“æ”¯æŒ**ï¼šå¾ˆå¤š Node.js åº“æ²¡æœ‰ Kotlin ç»‘å®š

### **æ–¹æ¡ˆä¸‰ï¼šä¿æŒç°çŠ¶ï¼Œä¼˜åŒ–æ¶æ„**

#### **ğŸ¯ ç›®æ ‡**
ä¿æŒåŒæŠ€æœ¯æ ˆï¼Œä½†ä¼˜åŒ–æ¶æ„å’Œæ„å»ºæµç¨‹ã€‚

#### **ğŸ“‹ å…·ä½“æ­¥éª¤**
1. **æ˜ç¡®èŒè´£åˆ†å·¥**
   - Kotlin/JSï¼šWeb ç•Œé¢ï¼ˆå¦‚æœéœ€è¦ï¼‰
   - TypeScriptï¼šCLI åº”ç”¨

2. **ä¼˜åŒ–æ„å»ºæµç¨‹**
   - ç®€åŒ–ä¾èµ–å…³ç³»
   - æ”¹è¿›æ„å»ºè„šæœ¬

#### **âŒ é—®é¢˜**
- ğŸ”„ **ç»´æŠ¤è´Ÿæ‹…**ï¼šä»éœ€ç»´æŠ¤ä¸¤å¥—ä»£ç 
- ğŸ”§ **å¤æ‚æ€§**ï¼šæ„å»ºå’Œä¾èµ–ç®¡ç†ä»ç„¶å¤æ‚

## ğŸ’¡ **æœ€ç»ˆæ¨èï¼šæ–¹æ¡ˆä¸€**

### **ğŸ¯ æ¨èç†ç”±**
1. **ç”¨æˆ·éœ€æ±‚æ˜ç¡®**ï¼šCLI ç”¨æˆ·éœ€è¦å‘½ä»¤è¡Œå·¥å…·ï¼ŒDesktop ç”¨æˆ·éœ€è¦å›¾å½¢ç•Œé¢
2. **æŠ€æœ¯æ ˆä¼˜åŠ¿**ï¼šTypeScript æ›´é€‚åˆ CLI å¼€å‘ï¼ŒKotlin æ›´é€‚åˆ Desktop å¼€å‘
3. **ç»´æŠ¤æ•ˆç‡**ï¼šç‹¬ç«‹é¡¹ç›®æ›´å®¹æ˜“ç»´æŠ¤å’Œå‘å¸ƒ
4. **å›¢é˜Ÿåˆ†å·¥**ï¼šå¯ä»¥è®©ä¸åŒå›¢é˜Ÿä¸“æ³¨ä¸åŒé¡¹ç›®

### **ğŸš€ å®æ–½è®¡åˆ’**
1. **ç¬¬ä¸€é˜¶æ®µ**ï¼šåˆ›å»ºç‹¬ç«‹çš„ `autodev-cli` é¡¹ç›®
2. **ç¬¬äºŒé˜¶æ®µ**ï¼šè¿ç§» TypeScript ä»£ç åˆ°æ–°é¡¹ç›®
3. **ç¬¬ä¸‰é˜¶æ®µ**ï¼šç§»é™¤ mpp-ui çš„ jsMain éƒ¨åˆ†
4. **ç¬¬å››é˜¶æ®µ**ï¼šæ›´æ–°æ–‡æ¡£å’Œå‘å¸ƒæµç¨‹

### **ğŸ“¦ æœ€ç»ˆæ¶æ„**
```
autodev/
â”œâ”€â”€ mpp-core/                       # æ ¸å¿ƒé€»è¾‘ï¼ˆKMPï¼‰
â”œâ”€â”€ mpp-ui/                         # Desktop åº”ç”¨ï¼ˆJVMï¼‰
â””â”€â”€ autodev-cli/                    # CLI åº”ç”¨ï¼ˆNode.jsï¼‰
```

è¿™æ ·çš„æ¶æ„æ›´æ¸…æ™°ã€æ›´æ˜“ç»´æŠ¤ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½æœ‰æ˜ç¡®çš„ç›®æ ‡å’Œç”¨æˆ·ç¾¤ä½“ã€‚

## ğŸ› ï¸ **è¯¦ç»†å®æ–½æ­¥éª¤**

### **æ­¥éª¤ 1ï¼šåˆ›å»ºç‹¬ç«‹ CLI é¡¹ç›®**

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºæ–°çš„ CLI é¡¹ç›®
mkdir autodev-cli
cd autodev-cli

# åˆå§‹åŒ– npm é¡¹ç›®
npm init -y

# å¤åˆ¶ TypeScript ä»£ç 
cp -r ../mpp-ui/src/jsMain/typescript/* ./src/
cp ../mpp-ui/package.json ./package.json.backup
cp ../mpp-ui/tsconfig.json ./
```

### **æ­¥éª¤ 2ï¼šæ›´æ–° CLI é¡¹ç›®é…ç½®**

```json
// autodev-cli/package.json
{
  "name": "@autodev/cli",
  "version": "0.1.4",
  "description": "AutoDev CLI - Terminal UI for AI-powered development assistant",
  "type": "module",
  "bin": {
    "autodev": "./dist/index.js"
  },
  "scripts": {
    "build": "tsc",
    "dev": "tsc --watch",
    "start": "node dist/index.js",
    "test": "vitest run"
  },
  "dependencies": {
    "@autodev/mpp-core": "^0.1.4",
    // ... å…¶ä»–ä¾èµ–
  }
}
```

### **æ­¥éª¤ 3ï¼šç®€åŒ– mpp-ui é…ç½®**

```kotlin
// ç§»é™¤ jsMain ç›¸å…³é…ç½®
val jsMain by getting {
    // åˆ é™¤è¿™ä¸ªé…ç½®å—
}
```

### **æ­¥éª¤ 4ï¼šæ›´æ–°æ„å»ºè„šæœ¬**

```bash
# autodev-cli/scripts/build.sh
#!/bin/bash
echo "Building AutoDev CLI..."
npm run build
chmod +x dist/index.js
echo "âœ… CLI build completed"
```

### **æ­¥éª¤ 5ï¼šç‹¬ç«‹å‘å¸ƒæµç¨‹**

```bash
# å‘å¸ƒ CLI
cd autodev-cli
npm publish

# å‘å¸ƒ Desktop
cd ../mpp-ui
./gradlew publishToMavenLocal
```

## ğŸ“‹ **è¿ç§»æ£€æŸ¥æ¸…å•**

### **CLI é¡¹ç›®åˆ›å»º**
- [ ] åˆ›å»º `autodev-cli` ç›®å½•
- [ ] å¤åˆ¶ TypeScript æºç 
- [ ] é…ç½® `package.json`
- [ ] é…ç½® `tsconfig.json`
- [ ] æ›´æ–°å¯¼å…¥è·¯å¾„
- [ ] æµ‹è¯•æ„å»ºå’Œè¿è¡Œ

### **mpp-ui ç®€åŒ–**
- [ ] ç§»é™¤ `src/jsMain/` ç›®å½•
- [ ] æ›´æ–° `build.gradle.kts`
- [ ] ç§»é™¤ JS ç›¸å…³ä¾èµ–
- [ ] æ›´æ–°æ–‡æ¡£
- [ ] æµ‹è¯• JVM æ„å»º

### **æ–‡æ¡£æ›´æ–°**
- [ ] æ›´æ–° README.md
- [ ] æ›´æ–°å®‰è£…è¯´æ˜
- [ ] æ›´æ–°å¼€å‘æŒ‡å—
- [ ] æ›´æ–°æ¶æ„æ–‡æ¡£

### **CI/CD æ›´æ–°**
- [ ] æ›´æ–°æ„å»ºè„šæœ¬
- [ ] æ›´æ–°å‘å¸ƒæµç¨‹
- [ ] æ›´æ–°æµ‹è¯•é…ç½®
- [ ] æ›´æ–°éƒ¨ç½²æ–‡æ¡£

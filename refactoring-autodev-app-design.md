# AutoDevApp é‡æ„è®¾è®¡æ–¹æ¡ˆ

## ğŸ“‹ ç°çŠ¶åˆ†æ

### AutoDevApp.kt - AI å¯¹è¯åº”ç”¨
**æ ¸å¿ƒåŠŸèƒ½**:
- âœ… æœ¬åœ° AI Chatï¼ˆChatHistoryManager + LLMï¼‰
- âœ… Agent æ¨¡å¼ï¼ˆLocal/Remote å¯åˆ‡æ¢ï¼‰
- âœ… SessionSidebarï¼ˆæœ¬åœ°+è¿œç¨‹ä¼šè¯å†å²ï¼‰
- âœ… å·¥ä½œç©ºé—´ç®¡ç†ï¼ˆWorkspaceManagerï¼‰
- âœ… é…ç½®ç®¡ç†ï¼ˆModelã€Toolã€Remote Serverï¼‰
- âœ… TreeViewï¼ˆAgent æ¨¡å¼æ–‡ä»¶æµè§ˆï¼‰

**UI æ¶æ„**:
```
Desktop:  [SessionSidebar] + [TopBar + Chat/Agent Content]
WASM:     [TopBarMenuä¾§è¾¹æ ] + [Chat/Agent Content]
Android:  è·³è½¬åˆ° UnifiedAppContent
```

**ç‰¹ç‚¹**:
- å•é¡µåº”ç”¨ï¼Œä¸“æ³¨äº AI å¯¹è¯
- æ”¯æŒ Chat å’Œ Agent ä¸¤ç§æ¨¡å¼
- SessionSidebar ç‹¬ç«‹ç®¡ç†ä¼šè¯å†å²

### SessionApp.kt - é¡¹ç›®ä»»åŠ¡ç®¡ç†åº”ç”¨
**æ ¸å¿ƒåŠŸèƒ½**:
- âœ… ç”¨æˆ·ç™»å½•/æ³¨å†Œ
- âœ… é¡¹ç›®ç®¡ç†ï¼ˆCRUD + Gitï¼‰
- âœ… ä»»åŠ¡ç®¡ç†ï¼ˆåŸºäºé¡¹ç›®ï¼‰
- âœ… Remote Agent æ‰§è¡Œï¼ˆTaskExecutionScreenï¼‰
- âœ… å¤šå±å¹•å¯¼èˆª

**UI æ¶æ„**:
```
Desktop:  [Sidebar(Sessions/Projectsåˆ—è¡¨)] + [Content]
Android:  [Drawer + BottomNavigation] + [Content]
```

**ç‰¹ç‚¹**:
- å¤šå±å¹•åº”ç”¨ï¼ˆProjects/Tasks/Sessions/Profileï¼‰
- å®Œæ•´çš„ä¸šåŠ¡æµç¨‹ï¼šLogin â†’ Projects â†’ Tasks â†’ Execution
- ViewModel æ¶æ„æ¸…æ™°

---

## ğŸ¯ èåˆç­–ç•¥

### 1. ç»Ÿä¸€çš„å±å¹•æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Unified App                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Screen 1: HOME        - æ¬¢è¿é¡µ/ä»ªè¡¨ç›˜ï¼ˆå¯é€‰ï¼‰               â”‚
â”‚  Screen 2: CHAT        - AI å¯¹è¯ï¼ˆåŸ AutoDevApp æ ¸å¿ƒï¼‰      â”‚
â”‚  Screen 3: PROJECTS    - é¡¹ç›®ç®¡ç†                            â”‚
â”‚  Screen 4: TASKS       - ä»»åŠ¡ç®¡ç†                            â”‚
â”‚  Screen 5: PROFILE     - é…ç½®/è®¾ç½®                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å±å¹•å®šä¹‰**:
```kotlin
enum class AppScreen {
    HOME,       // ä»ªè¡¨ç›˜ï¼ˆå¯é€‰ï¼Œæ˜¾ç¤ºæœ€è¿‘ä½¿ç”¨çš„é¡¹ç›®/ä¼šè¯ï¼‰
    CHAT,       // AI å¯¹è¯ï¼ˆLocal/Remote Agentï¼‰
    PROJECTS,   // é¡¹ç›®åˆ—è¡¨
    TASKS,      // ä»»åŠ¡åˆ—è¡¨ï¼ˆåŸºäºé€‰ä¸­çš„é¡¹ç›®ï¼‰
    PROFILE     // ç”¨æˆ·èµ„æ–™ + é…ç½®ï¼ˆModel/Tool/Remote Serverï¼‰
}
```

### 2. Desktop UI è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [SessionSidebar]  â”‚  [TopBar/Nav]  â”‚  [Main Content]           â”‚
â”‚  - å›ºå®šå·¦ä¾§        â”‚                â”‚                            â”‚
â”‚  - 240px å®½        â”‚                â”‚                            â”‚
â”‚  - å¯æŠ˜å           â”‚                â”‚                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  Local Sessions    â”‚  [Settings âš™]  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  - Chat 1          â”‚  [Tools ğŸ”§]    â”‚  â”‚                     â”‚  â”‚
â”‚  - Chat 2          â”‚  [Debug ğŸ›]    â”‚  â”‚                     â”‚  â”‚
â”‚                    â”‚                â”‚  â”‚   Content Area      â”‚  â”‚
â”‚  Remote Sessions   â”‚  [Nav Tabs]    â”‚  â”‚                     â”‚  â”‚
â”‚  - R Session 1     â”‚  â€¢ Home        â”‚  â”‚   (Chat/Projects/   â”‚  â”‚
â”‚                    â”‚  â€¢ Chat âœ“      â”‚  â”‚    Tasks/Profile)   â”‚  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â€¢ Projects    â”‚  â”‚                     â”‚  â”‚
â”‚  [+ New Chat]      â”‚  â€¢ Tasks       â”‚  â”‚                     â”‚  â”‚
â”‚  [Settings]        â”‚  â€¢ Profile     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  [Tools]           â”‚                â”‚                            â”‚
â”‚  [Debug]           â”‚                â”‚                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è®¾è®¡è¦ç‚¹**:
- **SessionSidebar**: 
  - å§‹ç»ˆæ˜¾ç¤ºåœ¨æœ€å·¦ä¾§ï¼ˆ240pxï¼‰
  - æ”¯æŒæŠ˜å ï¼ˆæ˜¾ç¤º/éšè—æŒ‰é’®ï¼‰
  - æ˜¾ç¤ºæœ¬åœ°ä¼šè¯ + è¿œç¨‹ä¼šè¯
  - åº•éƒ¨æ”¾ç½®å…¨å±€è®¾ç½®æŒ‰é’®ï¼ˆModel/Tool/Debugï¼‰
  
- **TopBar/Navigation**:
  - æ¨ªå‘æ ‡ç­¾é¡µåˆ‡æ¢ï¼ˆHome/Chat/Projects/Tasks/Profileï¼‰
  - å½“å‰å±å¹•é«˜äº®
  - å¯é€‰ï¼šé¢åŒ…å±‘å¯¼èˆªï¼ˆå½“å‰é¡¹ç›®/ä»»åŠ¡ï¼‰
  
- **Main Content**:
  - æ ¹æ®å½“å‰å±å¹•æ˜¾ç¤ºä¸åŒå†…å®¹
  - Chat å±å¹•æ”¯æŒ TreeViewï¼ˆSplitPaneï¼‰
  - Projects/Tasks ä½¿ç”¨åˆ—è¡¨ + è¯¦æƒ…å¸ƒå±€

### 3. Android UI è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [TopBar with Menu & Actions]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                   â”‚
â”‚                                   â”‚
â”‚        Main Content               â”‚
â”‚        (Full Screen)              â”‚
â”‚                                   â”‚
â”‚                                   â”‚
â”‚                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Bottom Navigation]              â”‚
â”‚   ğŸ  Home  ğŸ’¬ Chat  ğŸ“‹ Tasks  ğŸ‘¤  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Drawer Menu (Swipe from left)]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ User Profile      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸ  Home              â”‚
â”‚  ğŸ’¬ Chat              â”‚
â”‚  ğŸ“ Projects          â”‚
â”‚  ğŸ“‹ Tasks             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  âš™ï¸ Settings          â”‚
â”‚  ğŸ”§ Tools             â”‚
â”‚  ğŸ› Debug (if active) â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ğŸšª Logout            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è®¾è®¡è¦ç‚¹**:
- **Bottom Navigation**:
  - 4 ä¸ªä¸»è¦å…¥å£ï¼šHome/Chat/Projects/Profile
  - å›¾æ ‡ + æ–‡å­—æ ‡ç­¾
  - å½“å‰å±å¹•é«˜äº®
  
- **Drawer**:
  - å®Œæ•´çš„å¯¼èˆªèœå•
  - ç”¨æˆ·ä¿¡æ¯å±•ç¤º
  - è®¾ç½®å’Œé…ç½®å…¥å£
  - æ”¯æŒè·³è¿‡ç™»å½•ï¼ˆæ— éœ€è®¤è¯ä¹Ÿèƒ½ä½¿ç”¨æœ¬åœ°åŠŸèƒ½ï¼‰
  
- **TopBar**:
  - æ˜¾ç¤ºå½“å‰å±å¹•æ ‡é¢˜
  - æ±‰å ¡èœå•æŒ‰é’®ï¼ˆæ‰“å¼€ Drawerï¼‰
  - æ“ä½œæŒ‰é’®ï¼ˆæ–°å»ºã€æœç´¢ç­‰ï¼‰

### 4. WASM UI è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Vertical Menu Bar]  â”‚  [Main Content (Full Width)]         â”‚
â”‚  - å·¦ä¾§å›ºå®š           â”‚                                       â”‚
â”‚  - å›¾æ ‡æŒ‰é’®           â”‚                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  ğŸ                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  ğŸ’¬ âœ“                 â”‚  â”‚                                  â”‚ â”‚
â”‚  ğŸ“                   â”‚  â”‚                                  â”‚ â”‚
â”‚  ğŸ“‹                   â”‚  â”‚      Content Area                â”‚ â”‚
â”‚  â”€â”€â”€â”€                 â”‚  â”‚                                  â”‚ â”‚
â”‚  âš™ï¸                   â”‚  â”‚                                  â”‚ â”‚
â”‚  ğŸ”§                   â”‚  â”‚                                  â”‚ â”‚
â”‚  ğŸ›                   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è®¾è®¡è¦ç‚¹**:
- **Vertical Menu**: 
  - æç®€è®¾è®¡ï¼Œä»…å›¾æ ‡ï¼ˆ48px å®½ï¼‰
  - å½“å‰å±å¹•é«˜äº®
  - æ‚¬åœæ˜¾ç¤º Tooltip
  
- **No SessionSidebar**:
  - WASM ä¸æ˜¾ç¤º SessionSidebarï¼ˆèŠ‚çœç©ºé—´ï¼‰
  - ä¼šè¯å†å²é€šè¿‡å¼¹çª—æˆ–ä¸‹æ‹‰èœå•è®¿é—®
  
- **Content Area**:
  - å æ®å‰©ä½™å…¨éƒ¨å®½åº¦
  - Chat æ¨¡å¼æ”¯æŒç´§å‡‘å¸ƒå±€

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### 1. ç»Ÿä¸€çš„ ViewModel å±‚

```kotlin
// ç»Ÿä¸€çš„åº”ç”¨ä¸Šä¸‹æ–‡
data class UnifiedAppContext(
    // Session ç›¸å…³
    val sessionViewModel: SessionViewModel,
    val projectViewModel: ProjectViewModel,
    val taskViewModel: TaskViewModel,
    
    // Chat ç›¸å…³
    val chatHistoryManager: ChatHistoryManager,
    val workspaceManager: WorkspaceManager,
    val llmService: KoogLLMService?,
    
    // é…ç½®ç›¸å…³
    val currentModelConfig: ModelConfig?,
    val selectedAgentType: String,  // "Local" or "Remote"
    
    // çŠ¶æ€
    val currentScreen: AppScreen,
    val isAuthenticated: Boolean,
    val currentProject: Project?,
    val currentTask: Task?
)
```

### 2. å±å¹•è·¯ç”±è®¾è®¡

```kotlin
@Composable
fun UnifiedApp(
    serverUrl: String = "http://localhost:8080",
    initialScreen: AppScreen = AppScreen.HOME
) {
    val context = rememberUnifiedAppContext(serverUrl)
    var currentScreen by remember { mutableStateOf(initialScreen) }
    
    when {
        Platform.isAndroid -> {
            AndroidLayout(context, currentScreen) { currentScreen = it }
        }
        Platform.isWasm -> {
            WasmLayout(context, currentScreen) { currentScreen = it }
        }
        else -> {
            DesktopLayout(context, currentScreen) { currentScreen = it }
        }
    }
}
```

### 3. å±å¹•å†…å®¹ç»„ä»¶

```kotlin
@Composable
fun ScreenContent(
    screen: AppScreen,
    context: UnifiedAppContext
) {
    when (screen) {
        AppScreen.HOME -> HomeScreen(context)
        AppScreen.CHAT -> ChatScreen(context) // åŸ AutoDevApp æ ¸å¿ƒ
        AppScreen.PROJECTS -> ProjectListScreen(context.projectViewModel)
        AppScreen.TASKS -> TaskListScreen(context.taskViewModel)
        AppScreen.PROFILE -> ProfileScreen(context)
    }
}

@Composable
fun ChatScreen(context: UnifiedAppContext) {
    // é›†æˆåŸ AutoDevApp çš„ Chat/Agent åŠŸèƒ½
    // æ”¯æŒ Local/Remote åˆ‡æ¢
    // æ”¯æŒ Chat/Agent æ¨¡å¼åˆ‡æ¢
    // æ”¯æŒ TreeView
}
```

---

## ğŸ“± äº¤äº’æµç¨‹è®¾è®¡

### Desktop ç”¨æˆ·æµç¨‹

```mermaid
graph TD
    A[å¯åŠ¨åº”ç”¨] --> B{å·²ç™»å½•?}
    B -->|å¦| C[æ˜¾ç¤ºç™»å½•ç•Œé¢]
    B -->|æ˜¯| D[æ‰“å¼€ HOME å±å¹•]
    C --> E[ç™»å½•æˆ–è·³è¿‡]
    E --> D
    
    D --> F{ç”¨æˆ·é€‰æ‹©}
    F -->|ç‚¹å‡» Chat| G[Chat å±å¹•]
    F -->|ç‚¹å‡» Projects| H[Projects å±å¹•]
    F -->|ç‚¹å‡» Tasks| I[Tasks å±å¹•]
    F -->|ç‚¹å‡» Profile| J[Profile å±å¹•]
    
    G --> K{Chat æ¨¡å¼}
    K -->|Local Agent| L[æœ¬åœ° AI å¯¹è¯]
    K -->|Remote Agent| M[è¿œç¨‹ Agent æ‰§è¡Œ]
    
    H --> N[é€‰æ‹©é¡¹ç›®] --> I
    I --> O[é€‰æ‹©ä»»åŠ¡] --> P[TaskExecutionScreen]
```

### Android ç”¨æˆ·æµç¨‹

```mermaid
graph TD
    A[å¯åŠ¨åº”ç”¨] --> B{å·²ç™»å½•?}
    B -->|å¦| C[æ˜¾ç¤ºç™»å½•ç•Œé¢<br/>å¯è·³è¿‡]
    B -->|æ˜¯| D[Projects å±å¹•]
    C --> D
    
    D --> E[åº•éƒ¨å¯¼èˆªåˆ‡æ¢]
    E -->|Home| F[Home å±å¹•]
    E -->|Chat| G[Chat å±å¹•<br/>å…¨å±æ²‰æµ¸]
    E -->|Tasks| H[Tasks å±å¹•]
    E -->|Profile| I[Profile å±å¹•]
    
    G --> J{é•¿æŒ‰/èœå•}
    J -->|æŸ¥çœ‹å†å²| K[ä¼šè¯å†å²å¯¹è¯æ¡†]
    J -->|åˆ‡æ¢æ¨¡å¼| L[Local/Remote åˆ‡æ¢]
```

---

## ğŸ”„ æ•°æ®æµè®¾è®¡

### Session ç®¡ç†

```
Local Sessions (ChatHistoryManager)
  â†“
  â”œâ”€ æœ¬åœ°ç£ç›˜æŒä¹…åŒ–
  â””â”€ å†…å­˜ç¼“å­˜

Remote Sessions (SessionClient)
  â†“
  â”œâ”€ HTTP API
  â””â”€ è®¤è¯ Token

Unified SessionSidebar
  â†“
  â”œâ”€ æ˜¾ç¤ºæœ¬åœ°ä¼šè¯ï¼ˆLocal æ ‡ç­¾ï¼‰
  â””â”€ æ˜¾ç¤ºè¿œç¨‹ä¼šè¯ï¼ˆRemote æ ‡ç­¾ï¼‰
```

### Project ç®¡ç†

```
Local Workspace (WorkspaceManager)
  â†“
  â”œâ”€ æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
  â””â”€ CompletionManager

Remote Projects (ProjectClient)
  â†“
  â”œâ”€ Git ä»“åº“
  â””â”€ é¡¹ç›®å…ƒæ•°æ®

Unified Projects Screen
  â†“
  â”œâ”€ æ˜¾ç¤ºæœ¬åœ°å·¥ä½œç©ºé—´ï¼ˆLocal æ ‡ç­¾ï¼‰
  â””â”€ æ˜¾ç¤ºè¿œç¨‹é¡¹ç›®ï¼ˆRemote æ ‡ç­¾ï¼‰
```

### é…ç½®ç®¡ç†

```
ConfigManager
  â†“
  â”œâ”€ ModelConfig (API Key, Provider, Model)
  â”œâ”€ ToolConfig (Builtin Tools, MCP Tools)
  â”œâ”€ RemoteServerConfig (Server URL, Auth)
  â””â”€ AgentTypePreference (Local/Remote)

Profile Screen
  â†“
  â”œâ”€ æ¨¡å‹é…ç½®ç•Œé¢
  â”œâ”€ å·¥å…·é…ç½®ç•Œé¢
  â”œâ”€ è¿œç¨‹æœåŠ¡å™¨é…ç½®ç•Œé¢
  â””â”€ ç”¨æˆ·èµ„æ–™
```

---

## ğŸ¨ è®¾è®¡ç³»ç»Ÿè§„èŒƒ

### é¢œè‰²ä½¿ç”¨

- **Desktop/JVM**: `AutoDevColors` from `cc.unitmesh.devins.ui.compose.theme`
- **TypeScript/CLI**: `semanticInk` / `semanticChalk` from `design-system/`
- **ç¦æ­¢ç¡¬ç¼–ç é¢œè‰²**: ä½¿ç”¨ `MaterialTheme.colorScheme.*` æˆ–è®¾è®¡ Token

### é—´è·è§„èŒƒ

- **å°é—´è·**: 4dp, 8dp
- **ä¸­é—´è·**: 12dp, 16dp
- **å¤§é—´è·**: 24dp, 32dp
- **ç»„ä»¶é—´è·**: 8dpï¼ˆé»˜è®¤ï¼‰
- **å†…å®¹è¾¹è·**: 16dpï¼ˆAndroidï¼‰, 12dpï¼ˆDesktopï¼‰

### ç»„ä»¶å¤ç”¨

- **SessionSidebar**: Desktop ç‹¬å ï¼ŒAndroid é€šè¿‡ Drawer è®¿é—®
- **TopBarMenu**: Desktop/WASM ä½¿ç”¨ï¼ŒAndroid ä½¿ç”¨åŸç”Ÿ TopAppBar
- **DevInEditorInput**: ç»Ÿä¸€çš„è¾“å…¥ç»„ä»¶ï¼ˆChat/Agent å…±ç”¨ï¼‰
- **MessageList**: Chat å±å¹•çš„æ¶ˆæ¯åˆ—è¡¨ç»„ä»¶

---

## ğŸ“¦ æ¨¡å—åˆ’åˆ†å»ºè®®

```
mpp-ui/
â”œâ”€â”€ compose/
â”‚   â”œâ”€â”€ AutoDevApp.kt (åºŸå¼ƒ,è¿ç§»åˆ° UnifiedApp)
â”‚   â”œâ”€â”€ UnifiedApp.kt (æ–°å¢,ç»Ÿä¸€å…¥å£)
â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”œâ”€â”€ ChatScreen.kt (æ–°å¢,å°è£… Chat/Agent åŠŸèƒ½)
â”‚   â”‚   â”œâ”€â”€ SessionSidebar.kt (ä¿ç•™)
â”‚   â”‚   â”œâ”€â”€ MessageList.kt (ä¿ç•™)
â”‚   â”‚   â””â”€â”€ TopBarMenu.kt (ä¿ç•™)
â”‚   â”œâ”€â”€ agent/
â”‚   â”‚   â”œâ”€â”€ AgentChatInterface.kt (ä¿ç•™)
â”‚   â”‚   â”œâ”€â”€ CodingAgentViewModel.kt (ä¿ç•™)
â”‚   â”‚   â””â”€â”€ TreeView.kt (ä¿ç•™)
â”‚   â””â”€â”€ home/
â”‚       â””â”€â”€ HomeScreen.kt (æ–°å¢,ä»ªè¡¨ç›˜)
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ SessionApp.kt (åºŸå¼ƒ,åˆå¹¶åˆ° UnifiedApp)
â”‚   â”œâ”€â”€ NavLayout.kt (ä¿ç•™å¹¶å¢å¼º)
â”‚   â”œâ”€â”€ UnifiedAppContent.kt (é‡æ„)
â”‚   â””â”€â”€ UnifiedAppContext.kt (æ–°å¢)
â”œâ”€â”€ project/
â”‚   â”œâ”€â”€ ProjectListScreen.kt (ä¿ç•™)
â”‚   â”œâ”€â”€ ProjectViewModel.kt (ä¿ç•™)
â”‚   â””â”€â”€ ProjectClient.kt (ä¿ç•™)
â”œâ”€â”€ task/
â”‚   â”œâ”€â”€ TaskListScreen.kt (ä¿ç•™)
â”‚   â”œâ”€â”€ TaskExecutionScreen.kt (ä¿ç•™)
â”‚   â””â”€â”€ TaskViewModel.kt (ä¿ç•™)
â””â”€â”€ profile/
    â””â”€â”€ ProfileScreen.kt (æ–°å¢,ç»Ÿä¸€é…ç½®ç•Œé¢)
```

---

## ğŸš€ å®æ–½æ­¥éª¤

### Phase 1: åŸºç¡€æ¶æ„æ­å»ºï¼ˆWeek 1-2ï¼‰

1. âœ… åˆ›å»º `UnifiedAppContext` æ•°æ®ç±»
2. âœ… åˆ›å»º `UnifiedApp.kt` å…¥å£æ–‡ä»¶
3. âœ… é‡æ„ `NavLayout.kt` æ”¯æŒæ–°çš„å±å¹•æšä¸¾
4. âœ… åˆ›å»º `ChatScreen.kt` å°è£…åŸ AutoDevApp æ ¸å¿ƒåŠŸèƒ½
5. âœ… åˆ›å»º `HomeScreen.kt` ä»ªè¡¨ç›˜ï¼ˆå¯é€‰ï¼‰
6. âœ… åˆ›å»º `ProfileScreen.kt` ç»Ÿä¸€é…ç½®ç•Œé¢

### Phase 2: åŠŸèƒ½è¿ç§»ï¼ˆWeek 3-4ï¼‰

1. âœ… è¿ç§» Chat åŠŸèƒ½åˆ° ChatScreen
2. âœ… è¿ç§» Agent åŠŸèƒ½åˆ° ChatScreen
3. âœ… ç»Ÿä¸€ SessionSidebar åœ¨ Desktop å¸ƒå±€ä¸­
4. âœ… ç»Ÿä¸€é…ç½®ç®¡ç†åˆ° ProfileScreen
5. âœ… æµ‹è¯• Local/Remote åˆ‡æ¢
6. âœ… æµ‹è¯•ä¼šè¯å†å²ç®¡ç†

### Phase 3: UI ä¼˜åŒ–ï¼ˆWeek 5-6ï¼‰

1. âœ… ä¼˜åŒ– Desktop å¸ƒå±€ï¼ˆSessionSidebar + TopBarï¼‰
2. âœ… ä¼˜åŒ– Android å¸ƒå±€ï¼ˆBottomNavigation + Drawerï¼‰
3. âœ… ä¼˜åŒ– WASM å¸ƒå±€ï¼ˆVertical Menuï¼‰
4. âœ… ç»Ÿä¸€è®¾è®¡ç³»ç»Ÿé¢œè‰²å’Œé—´è·
5. âœ… æ·»åŠ åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ
6. âœ… å“åº”å¼å¸ƒå±€é€‚é…

### Phase 4: æµ‹è¯•ä¸å‘å¸ƒï¼ˆWeek 7-8ï¼‰

1. âœ… å•å…ƒæµ‹è¯•ï¼ˆViewModelsï¼‰
2. âœ… é›†æˆæµ‹è¯•ï¼ˆå±å¹•åˆ‡æ¢ï¼‰
3. âœ… ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆå®Œæ•´æµç¨‹ï¼‰
4. âœ… æ€§èƒ½æµ‹è¯•ï¼ˆå†…å­˜ã€æ¸²æŸ“ï¼‰
5. âœ… è·¨å¹³å°æµ‹è¯•ï¼ˆJVM/Android/WASMï¼‰
6. âœ… æ–‡æ¡£æ›´æ–°

---

## ğŸ¯ å…³é”®è®¾è®¡å†³ç­–

### âœ… å†³ç­– 1: Chat ä½œä¸ºç‹¬ç«‹å±å¹•

**ç†ç”±**:
- AutoDevApp çš„ Chat/Agent åŠŸèƒ½è¶³å¤Ÿå¤æ‚ï¼Œéœ€è¦ç‹¬ç«‹å±å¹•
- ç”¨æˆ·å¯ä»¥åœ¨ Chat å’Œ Projects/Tasks ä¹‹é—´å¿«é€Ÿåˆ‡æ¢
- Desktop å¯ä»¥åŒæ—¶æ˜¾ç¤º SessionSidebar å’Œ Chat å†…å®¹

### âœ… å†³ç­– 2: SessionSidebar ä»… Desktop æ˜¾ç¤º

**ç†ç”±**:
- Desktop å±å¹•å®½åº¦å……è¶³ï¼ŒSessionSidebar å¯ä»¥å¸¸é©»å·¦ä¾§
- Android å±å¹•çª„ï¼Œé€šè¿‡ Drawer è®¿é—®ä¼šè¯å†å²æ›´åˆé€‚
- WASM ä¿æŒæç®€ï¼Œä¼šè¯å†å²é€šè¿‡å¼¹çª—è®¿é—®

### âœ… å†³ç­– 3: ç»Ÿä¸€é…ç½®åˆ° Profile å±å¹•

**ç†ç”±**:
- æ¨¡å‹é…ç½®ã€å·¥å…·é…ç½®ã€è¿œç¨‹æœåŠ¡å™¨é…ç½®éƒ½æ˜¯å…¨å±€è®¾ç½®
- æ”¾åœ¨ Profile å±å¹•ç»Ÿä¸€ç®¡ç†ï¼Œç¬¦åˆç”¨æˆ·è®¤çŸ¥
- é¿å…é…ç½®åˆ†æ•£åœ¨å¤šä¸ªä½ç½®

### âœ… å†³ç­– 4: ä¿ç•™ Local/Remote åˆ‡æ¢

**ç†ç”±**:
- ç”¨æˆ·éœ€è¦åœ¨æœ¬åœ°æ¨¡å¼ï¼ˆæ— éœ€ç™»å½•ï¼‰å’Œè¿œç¨‹æ¨¡å¼ä¹‹é—´åˆ‡æ¢
- Local æ¨¡å¼é€‚åˆä¸ªäººå¼€å‘è€…ï¼ˆæœ¬åœ° LLMï¼‰
- Remote æ¨¡å¼é€‚åˆå›¢é˜Ÿåä½œï¼ˆäº‘ç«¯ Agentï¼‰

### âœ… å†³ç­– 5: WorkspaceManager ä¸ ProjectClient å¹¶å­˜

**ç†ç”±**:
- WorkspaceManager ç®¡ç†æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼ˆæœ¬åœ°æ¨¡å¼ï¼‰
- ProjectClient ç®¡ç†è¿œç¨‹é¡¹ç›®ï¼ˆGit + äº‘ç«¯ï¼‰
- ä¸¤è€…å¯ä»¥å…±å­˜ï¼Œç”¨æˆ·æ ¹æ®éœ€è¦é€‰æ‹©

---

## ğŸ”® æœªæ¥æ‰©å±•

### æ‰©å±•ç‚¹ 1: å¤š Agent æ”¯æŒ

- å½“å‰åªæœ‰ "Default" Agent
- æœªæ¥å¯ä»¥æ”¯æŒå¤šä¸ª Agentï¼ˆCode/Design/Test/Deployï¼‰
- Agent å¸‚åœºï¼ˆç¤¾åŒºè´¡çŒ®çš„ Agentï¼‰

### æ‰©å±•ç‚¹ 2: å®æ—¶åä½œ

- å¤šç”¨æˆ·åŒæ—¶ç¼–è¾‘åŒä¸€ä¸ªé¡¹ç›®
- å®æ—¶åŒæ­¥ Chat æ¶ˆæ¯
- å†²çªè§£å†³æœºåˆ¶

### æ‰©å±•ç‚¹ 3: æ’ä»¶ç³»ç»Ÿ

- MCPï¼ˆModel Context Protocolï¼‰å·¥å…·æ”¯æŒ
- è‡ªå®šä¹‰ Agent æ’ä»¶
- ç¬¬ä¸‰æ–¹é›†æˆï¼ˆGitHub/GitLab/Jiraï¼‰

### æ‰©å±•ç‚¹ 4: ç§»åŠ¨ç«¯åŸç”Ÿä½“éªŒ

- Android åŸç”Ÿç»„ä»¶
- iOS æ”¯æŒï¼ˆKotlin Multiplatformï¼‰
- æ‰‹åŠ¿ä¼˜åŒ–ï¼ˆæ»‘åŠ¨ã€é•¿æŒ‰ï¼‰

---

## ğŸ“Š æ€»ç»“

### ä¼˜åŠ¿

âœ… **ç»Ÿä¸€ä½“éªŒ**: è·¨å¹³å°ä¸€è‡´çš„äº¤äº’é€»è¾‘  
âœ… **åŠŸèƒ½å®Œæ•´**: èåˆ Chat + Projects + Tasks  
âœ… **æ¶æ„æ¸…æ™°**: ViewModel + Screen åˆ†ç¦»  
âœ… **æ˜“äºæ‰©å±•**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ·»åŠ æ–°åŠŸèƒ½  
âœ… **æ€§èƒ½ä¼˜åŒ–**: SessionSidebar æŒ‰éœ€æ˜¾ç¤ºï¼ŒèŠ‚çœèµ„æº

### é£é™©

âš ï¸ **é‡æ„å·¥ä½œé‡**: éœ€è¦è¿ç§»å¤§é‡ä»£ç   
âš ï¸ **å…¼å®¹æ€§**: éœ€è¦ç¡®ä¿ç°æœ‰åŠŸèƒ½ä¸å—å½±å“  
âš ï¸ **æµ‹è¯•è¦†ç›–**: éœ€è¦å®Œæ•´çš„æµ‹è¯•è¦†ç›–  
âš ï¸ **ç”¨æˆ·è¿ç§»**: ç”¨æˆ·ä¹ æƒ¯çš„æ”¹å˜å¯èƒ½éœ€è¦é€‚åº”æœŸ

### ä¸‹ä¸€æ­¥

1. **è®¨è®ºå¹¶ç¡®è®¤è®¾è®¡æ–¹æ¡ˆ**
2. **åˆ›å»º GitHub Issue/Task**
3. **åˆ†é…å¼€å‘ä»»åŠ¡**
4. **å¼€å§‹ Phase 1 å®æ–½**

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¶é—´**: 2025-11-13  
**ä½œè€…**: AI Assistant  
**çŠ¶æ€**: å¾…å®¡æ ¸

